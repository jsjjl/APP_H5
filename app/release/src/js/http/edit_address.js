function get_user_address(){var a=URLS.SERVER_URL+URLS.userAddressView,s=address_param,e="";for(v in address_param)e=e+v+"="+address_param[v]+"&";console.log(URLS.SERVER_URL+URLS.userAddressView+"?"+e.substr(0,e.length-1));var n=function(a){console.log(a),$(".txt_username").val(a.datas.contactName),$(".txt_tel").val(a.datas.contactPhone);a.datas.address;$(".provinceName").html(a.datas.address),$(".txt_address").val(a.datas.detailAddress),$(".theDefault").val(a.datas.theDefault)},t=function(){$(".ajax_noload").show()};ajaxPost(a,s,n,t)}var addressId;GetQueryString("addressId")&&(addressId=GetQueryString("addressId"));var address_param={};address_param.id=addressId,address_param["userInfo.phone"]=user,get_user_address(),$(function(){function a(){i=$(".txt_username").on("input",function(){$(this).removeClass("txt_err"),i=this.value.length,s()}).val().length,r=$(".txt_tel").on("input",function(){if($(this).removeClass("txt_err"),r=this.value.length,r>11){var a=$(this).val(),n=a.substring(0,11);$(this).val(n),e("手机号码不得超过11位")}else e("");s()}).val().length,o=$(".txt_address").on("input",function(){$(this).removeClass("txt_err"),o=this.value.length,s()}).val().length,$(".save_address").on("click",function(){$(this).hasClass("bt_no")||d()})}function s(){l=$(".provinceName").html(),i=$(".txt_username").val(),r=$(".txt_tel").val(),o=$(".txt_address").val(),i&&r&&o&&l?($(".save_address").removeClass("bt_no"),console.log(1)):($(".save_address").addClass("bt_no"),console.log(2))}function e(a){void 0==a||0==a.length?$(".item_tips").hide().children(".err_msg").removeClass("show"):($(".item_tips").show().children(".err_msg").html(a),$(".item_tips").children(".err_msg").addClass("show"),setTimeout(function(){$(".item_tips").hide().children(".err_msg").removeClass("show")},3e3))}function n(a){var s=/^1[0-9]{10}$/;return s.test(a)}function t(){if(!n($(".txt_tel").val()))return e("手机号格式错误"),void $(".txt_tel").focus().addClass("txt_err");address_param.contactName=$(".txt_username").val(),address_param.contactPhone=$(".txt_tel").val(),address_param.address=$(".provinceName").html()+$(".cityName").html()+$(".areaName").html(),address_param.detailAddress=$(".txt_address").val(),address_param.theDefault=$(".theDefault").val();var a=URLS.SERVER_URL+URLS.userAddressEdit,s=address_param,t="";for(v in address_param)t=t+v+"="+address_param[v]+"&";console.log(URLS.SERVER_URL+URLS.userAddressEdit+"?"+t.substr(0,t.length-1));var d=function(a){console.log(a),a.code>0?(window.history.back(),localStorage.setItem("refreshed","false")):$(".item_tips").show().children(".err_msg").html(a.msg)},i=function(){$(".ajax_noload").show()};ajaxPost(a,s,d,i)}function d(){$(".save_address").addClass("bt_no").html("提交中"),$(".item_tips").hide(),t()}$("#npost_dizhi").click(function(){function a(){$(".ndz_nav span").removeClass("active"),$(".ndz_nav span.ndz_nav01").addClass("active"),$(".ndz_nav_li").empty(),$(".ndz_nav_li").addClass("loading");var a=URLS.SERVER_URL+URLS.getArea+"";console.log(URLS.SERVER_URL+URLS.getArea+"");var n="",d=function(a){console.log(a);for(var n="",d=a,i=0;i<d.length;i++)n+=t==d[i].id?"<span class='active'  data-provinceId='"+d[i].id+"' >":"<span data-provinceId='"+d[i].id+"'>",n+=d[i].name,n+="</span>";$(".ndz_nav_li").removeClass("loading"),$(".ndz_nav_li").empty().append(n),$(".ndz_nav02").empty(),$(".ndz_nav_li span").click(function(){$(".ndz_nav_li span").removeClass("active"),$(this).addClass("active"),$(".ndz_nav01,.provinceName").empty().append($(this).html()),t=$(this).attr("data-provinceId"),e(),s()})},i=function(){$(".ajax_noload").show()};ajaxPost(a,n,d,i)}function e(){$(".ndz_nav span").removeClass("active"),$(".ndz_nav02").addClass("active"),$(".ndz_nav_li").empty(),$(".ndz_nav_li").addClass("loading"),$.post(URLS.SERVER_URL+URLS.getArea+"?id="+t,{},function(a){$(".ndz_nav02,.cityName").empty().append(a[0].REGIONNAME);for(var e="",t=a,i=0;i<t.length;i++)e+=d==t[i].id?"<span class='active' data-cityId='"+t[i].id+"' >":"<span data-cityId='"+t[i].id+"' >",e+=t[i].name,e+="</span>";$(".ndz_nav_li").removeClass("loading"),$(".ndz_nav_li").empty().append(e),$(".ndz_nav03").empty(),$(".ndz_nav_li span").click(function(){$(".ndz_nav_li span").removeClass("active"),$(this).addClass("active"),$(".ndz_nav02,.cityName").empty().append($(this).html()),d=$(this).attr("data-cityId"),n(),s()})},"json")}function n(){$(".ndz_nav span").removeClass("active"),$(".ndz_nav03").addClass("active"),$(".ndz_nav_li").empty(),$(".ndz_nav_li").addClass("loading"),$.post(URLS.SERVER_URL+URLS.getArea+"?id="+d,{},function(a){$(".ndz_nav03,.areaName").empty().append(a[0].REGIONNAME);for(var e="",n=a,t=0;t<n.length;t++)e+=i==n[t].id?"<span class='active' data-areaId='"+n[t].id+"' >":"<span data-areaId='"+n[t].id+"' >",e+=n[t].name,e+="</span>";$(".ndz_nav_li").removeClass("loading"),$(".ndz_nav_li").empty().append(e),$(".ndz_nav_li span").click(function(){$(".ndz_nav_li span").removeClass("active"),$(this).addClass("active"),$(".ndz_nav03,.areaName").empty().append($(this).html()),i=$(this).attr("data-areaId"),$(".cover-decision").remove(),$(".mui-dizhi").removeClass("show"),$(".mui-dizhi").css("display","none"),s()})},"json")}$("body").append("<div class='cover-decision'></div>"),$(".mui-dizhi").addClass("show"),$(".mui-dizhi").css("display","block"),a(),$(".ndz_nav01").click(function(){$(this).hasClass("active")||a()}),$(".ndz_nav02").click(function(){$(this).hasClass("active")||""==$(".ndz_nav_li").html()||(e(),$(".ndz_nav03").empty())}),$(".ndz_nav03").click(function(){$(this).hasClass("active")||""==$(".ndz_nav_li").html()||n()});var t,d,i;$(".cover-decision").click(function(){$(".cover-decision").remove(),$(".mui-dizhi").removeClass("show"),$(".mui-dizhi").css("display","none")})});var i=0,r=0,l=0,o=0;a()});